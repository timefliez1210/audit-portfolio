# [000039] Off-by-one `claimDeadline` checks prevent claims at the deadline
  
  ### Summary

The claim functions use strict inequalities against `claimDeadline`, which prevents users from claiming exactly at the configured deadline:

```solidity
function claimStablecoinAllocation(uint256 rewardProjectId) external {
    RewardProject storage rewardProject = rewardProjects[rewardProjectId];
    require(
        block.timestamp < rewardProject.claimDeadline,
        Deadline_Has_Passed()
    );
    ...
}
```

```solidity
function claimNFT(
    uint256 projectId,
    uint256 poolId,
    uint256 amount,
    bytes32[] calldata merkleProof
) external returns (uint256) {
    BiddingProject storage biddingProject = biddingProjects[projectId];
    require(
        biddingProject.claimDeadline > block.timestamp,
        Deadline_Has_Passed()
    );
    ...
}
```

At `block.timestamp == claimDeadline`, both `claimStablecoinAllocation/claimRewardTVS` and `claimNFT` revert with `Deadline_Has_Passed()`, so the “claim window” is effectively `[start, claimDeadline)` instead of `[start, claimDeadline]`. 

At the same time, post-deadline operations (e.g. `distributeRewardTVS`, `withdrawPostDeadlineProfit`, `withdrawAllPostDeadlineProfits`) are only allowed when `block.timestamp > claimDeadline`, so neither pre-deadline claims nor post-deadline flows are possible exactly at `claimDeadline`.

### Root Cause

Using strict `<` / `>` comparisons against `claimDeadline` in the claim paths:

* `block.timestamp < rewardProject.claimDeadline`
* `biddingProject.claimDeadline > block.timestamp`

https://github.com/dualguard/2025-11-alignerz/blob/main/protocol/src/contracts/vesting/AlignerzVesting.sol#L508

### Internal Pre-conditions

_No response_

### External Pre-conditions

_No response_

### Attack Path

N/A

### Impact

Users attempting to claim exactly at `claimDeadline` will be reverted with `Deadline_Has_Passed()`, which also doesn't allow post-deadline operations.

### PoC

_No response_

### Mitigation

Consider making the claim checks inclusive, so that claims are permitted at the deadline timestamp.
  