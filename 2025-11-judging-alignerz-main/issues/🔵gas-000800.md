# [000800] Redundant Vesting Period Validation Causes Unnecessary Gas Consumption
  
  ### Summary

Redundant require statements in vesting period validation will cause increased gas costs for users as bidders will execute unnecessary validation logic when placing or updating bids.

### Root Cause

In `AlignerzVesting.sol:placeBid` and `AlignerzVesting.sol:updateBid`, the vesting period validation uses two separate checks:
1. `require(vestingPeriod > 0, Zero_Value());`
2. `require(vestingPeriod < 2 || vestingPeriod % vestingPeriodDivisor == 0, Vesting_Period_Is_Not_Multiple_Of_The_Base_Value());`

This is inefficient because the second condition already handles the case where `vestingPeriod == 1` (since `1 < 2` evaluates to true). The first check is redundant and wastes gas on an unnecessary validation that will always pass if the second check passes.

[placeBid checks](https://github.com/dualguard/2025-11-alignerz/blob/main/protocol/src/contracts/vesting/AlignerzVesting.sol#L722-L724)

[updateBid checks](https://github.com/dualguard/2025-11-alignerz/blob/main/protocol/src/contracts/vesting/AlignerzVesting.sol#L754-L759)

### Internal Pre-conditions

_No response_

### External Pre-conditions

_No response_

### Attack Path

This is a gas optimization issue, not an attack vector. The inefficiency occurs in normal operation:

1. User calls `placeBid()` or `updateBid()` with a valid vesting period
2. Contract executes `require(vestingPeriod > 0, Zero_Value())` 
3. Contract then executes `require(vestingPeriod < 2 || vestingPeriod % vestingPeriodDivisor == 0, ...)` which already implicitly validates that vestingPeriod is non-zero
4. User pays additional gas for the redundant first check


### Impact

Users pay unnecessary gas costs on every bid placement and update. While the per-transaction cost increase is small (one additional SLOAD and comparison operation), this compounds across all users and all transactions. The optimization would save approximately 3-5 gas units per call.


### PoC

_No response_

### Mitigation

Consolidate the validation logic into a single require statement:

**For `placeBid` function:**
```solidity
require(vestingPeriod == 1 || vestingPeriod % vestingPeriodDivisor == 0, Vesting_Period_Is_Not_Multiple_Of_The_Base_Value());
```

**For `updateBid` function:**
```solidity
require(newVestingPeriod == 1 || newVestingPeriod % vestingPeriodDivisor == 0, Vesting_Period_Is_Not_Multiple_Of_The_Base_Value());
```

This single check validates that the vesting period is either 1 or a valid multiple of the divisor, eliminating the redundant zero-check while maintaining the same validation logic.
  