# [000034] Missing validation allows merging TVSs from different project types
  
  ### Summary

When merging TVSs, the contract does not check that the NFT being merged (`nftId`) belongs to the same project type (bidding or reward) as the destination NFT (`mergedNftId`).
This allows a user to combine a **reward-project TVS** into a **bidding-project TVS**, or vice-versa, as long as both use the same ERC-20 token:

```solidity
bool isBiddingProjectTVSToMerge = NFTBelongsToBiddingProject[nftId];
// ... snip ...
require(address(token) == address(tokenToMerge), Different_Tokens());
```

This breaks the natural invariant that a single TVS should contain vesting flows from only one project type.

### Root Cause

The merge logic validates only that both NFTs use the same token, but does not enforce that both originate from the same project category, https://github.com/dualguard/2025-11-alignerz/blob/main/protocol/src/contracts/vesting/AlignerzVesting.sol#L1035.

### Internal Pre-conditions

_No response_

### External Pre-conditions

_No response_

### Attack Path

N/A

### Impact

Allows creation of mixed-type TVSs.

### PoC

_No response_

### Mitigation

Consider adding an explicit check before merging:

```solidity
require(
    isBiddingProjectTVSToMerge == isBiddingProject,
    Different_Projects()
);
```
  