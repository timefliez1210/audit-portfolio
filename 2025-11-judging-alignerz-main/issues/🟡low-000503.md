# [000503] Pool Creation Allows 11 Pools Instead of Maximum 10 - Violates Documented/Commented Limit
  
  ### Summary

The `createPool()` function uses `poolCount <= 10` which allows creation of 11 pools (IDs 0-10) instead of the documented/commented maximum of 10 pools. The check should be `poolCount < 10` to enforce the actual limit. This violates the error message `Cannot_Exceed_Ten_Pools_Per_Project` and the documented/commented constraint.


### Root Cause

In `AlignerzVesting.sol` contract in `createPool()`function Incorrect Boundary Condition in Pool Count Validation:

```solidity
function createPool(...) external onlyOwner {
    // ... validation ...
    
@>  require(biddingProject.poolCount <= 10, Cannot_Exceed_Ten_Pools_Per_Project());
    //                                 ^^ WRONG: Allows poolCount = 10
    
    uint256 poolId = biddingProject.poolCount; // poolId assigned BEFORE increment
    biddingProject.vestingPools[poolId] = VestingPool({...});
    
    biddingProject.poolCount++; // Incremented AFTER assignment
}
```

How it allows 11 pools:-> Pool creation flow: Check → Assign → Increment
- When `poolCount = 10`:
  - Check: `10 <= 10` →  PASSES (WRONG)
  - Assign: `poolId = 10` 
  - Increment: `poolCount = 11`
  - Result: Pool ID 10 created (11th pool)

Correct pools IDs should be: 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 (10 total)
Current code allows: 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 (11 total)

Code Snippet- 
https://github.com/dualguard/2025-11-alignerz/blob/f7eeed88d91356484c02af6f38b71f27b790828c/protocol/src/contracts/vesting/AlignerzVesting.sol#L675-L702


### Internal Pre-conditions

1. Owner calls `createPool()` sequentially.
2. `poolCount` starts at 0 (initialized in `launchBiddingProject`).


### External Pre-conditions

1. Owner attempts to create maximum allowed pools.
2. Owner doesn't manually track pool count.



### Attack Path


Step-by-Step Pool Creation:

```solidity
// Initial state
poolCount = 0

// Pool 1 (ID 0)
createPool() → Check: 0 <= 10  → poolId = 0 → poolCount = 1

// Pool 2 (ID 1)  
createPool() → Check: 1 <= 10  → poolId = 1 → poolCount = 2

// ... continue ...

// Pool 10 (ID 9)
createPool() → Check: 9 <= 10  → poolId = 9 → poolCount = 10

// Pool 11 (ID 10) - SHOULD FAIL but DOESN'T
createPool() → Check: 10 <= 10  → poolId = 10 → poolCount = 11
//             ^^^^^^^^^^^^^^^^ BUG: This passes but shouldn't!

// Pool 12 (ID 11) - NOW it fails
createPool() → Check: 11 <= 10  → REVERTS: Cannot_Exceed_Ten_Pools_Per_Project
```

### Impact

 Creates 11 pools instead of documented/commented 10. Code behavior doesn't match comments/error names.


### PoC

N/A

### Mitigation

N/A
  