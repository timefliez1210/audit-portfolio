# [000042] Malicous User can DOS `distributeRemainingRewardTVS`
  
  ### Summary

The function `distributeRemainingRewardTVS` is intended to distribute TVS allocations to KOLs who did not claim their rewards before the deadline. It loops through the remaining KOLs, mints an NFT for each one, and then assigns the vesting amount to that NFT.

However, if one of the KOL addresses is a contract that reverts inside `onERC721Received`, the NFT minting will revert because `_checkContractOnERC721Received` reverts. This causes the entire `distributeRemainingRewardTVS` transaction to revert, preventing all KOLs from receiving their NFTs.

As a result, a single malicious or misconfigured contract address in the KOL list can block the entire post-deadline distribution and permanently freeze the unclaimed allocations for every remaining KOL.

### Root Cause

The function assumes all KOL addresses are safe receivers, but one reverting contract breaks the entire loop, https://github.com/dualguard/2025-11-alignerz/blob/main/protocol/src/contracts/vesting/AlignerzVesting.sol#L562.

### Internal Pre-conditions

_No response_

### External Pre-conditions

_No response_

### Attack Path

1. Attacker registers a smart contract as their KOL address. The attacker ensures their KOL address is a contract that reverts on `onERC721Received`.

2. Claim window ends and admin calls `distributeRemainingRewardTVS`. The function loops through all remaining KOLs and tries to mint an NFT to each.

3. When minting reaches the attackerâ€™s contract, it reverts and breaks the entire loop. The revert stops the whole transaction, preventing all remaining KOLs from receiving their unclaimed NFTs.

### Impact

Breaking the `distributeRemainingRewardTVS` and preventing the mint for all other users.

### PoC

_No response_

### Mitigation

Do a try/catch wrapper around nftContract.mint(kol) that skips failing KOLs and emits an event:
```solidity
try nftContract.mint(kol) returns (uint256 nftId) {
    // normal flow
} catch {
    emit RewardMintFailed(rewardProjectId, kol);
    continue;
}
```
  