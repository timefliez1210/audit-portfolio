# [000670] Infinite loop causing a full DoS of `getUnclaimedAmounts()`.
  
  ### Summary

In `getUnclaimedAmounts()`, the loop never increments the index `i` when a `continue` statement is reached. This causes an infinite loop, resulting in a permanent DoS for any caller of the function as well as any function that relies on `getUnclaimedAmounts()`.

### Root Cause

https://github.com/dualguard/2025-11-alignerz/blob/main/protocol/src/contracts/A26ZDividendDistributor/A26ZDividendDistributor.sol#L140
In `A26ZDividendDistributor.sol:getUnclaimedAmounts()`, the `for` loop contains multiple `continue` statements without incrementing `i` beforehand:
```solidity
for (uint i; i < len;) {
    if (claimedFlows[i]) continue;  // i not incremented → infinite loop
    if (claimedSeconds[i] == 0) {
        amount += amounts[i];
        continue;                  // i not incremented → infinite loop
    }
    ...
    unchecked { ++i; }
}
```
This results in `i` remaining constant whenever one of these conditions is hit, producing an infinite loop.

### Internal Pre-conditions

_No response_

### External Pre-conditions

_No response_

### Attack Path

Any call to these functions will revert as they call `getUnclaimedAmounts()`:
- `GetTotalUnclaimedAmounts()`
- `setUpTheDividends()`
- `setAmounts()`

### Impact

The protocol can't set the dividends.
TVS holders can't claim their dividends.

### PoC

_No response_

### Mitigation

Ensure that `i` is incremented before each `continue`:
```solidity
for (uint i; i < len;) {

    if (claimedFlows[i]) {
        unchecked { ++i; }
        continue;
    }

    if (claimedSeconds[i] == 0) {
        amount += amounts[i];
        unchecked { ++i; }
        continue;
    }

    uint256 claimedAmount = claimedSeconds[i] * amounts[i] / vestingPeriods[i];
    uint256 unclaimedAmount = amounts[i] - claimedAmount;
    amount += unclaimedAmount;

    unchecked { ++i; }
}
  